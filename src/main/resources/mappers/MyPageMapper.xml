<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.uplus.ureka.repository.user.mypage.MyPageMapper">

    <!-- 회원 상세 정보 조회 -->
    <select id="selectMemberDetailsById" resultType="com.uplus.ureka.dto.user.Mypage.MyPageDTO">
        SELECT
        u.id,  <!-- USERS 테이블의 id -->
        u.member_email,
        u.member_name,
        u.member_nickname,
        u.member_introduce,
        u.member_phone,
        ui.category_id  <!-- USER_INTERESTS의 category_id 추가 -->
        FROM USERS u
        LEFT JOIN USER_INTERESTS ui ON u.id = ui.user_id  <!-- JOIN 수정 -->
        WHERE u.member_email = #{member_email}
    </select>


    <!-- 프로필 이미지 업데이트 -->
    <!--    <update id="updateProfileImageByMemberId">-->
    <!--        UPDATE Member_table-->
    <!--        SET member_profile_image = #{profileImage}-->
    <!--        WHERE member_id = #{member_id}-->
    <!--    </update>-->

    <update id="updateProfileImage" parameterType="com.uplus.ureka.dto.user.Mypage.MyPageDTO">
        UPDATE USERS
        SET member_profile_image = #{member_profile_image}
        WHERE member_id = #{member_id}
    </update>

    <!-- 회원 정보 수정 (기본 정보와 상세 정보) -->
    <update id="updateMemberInfo">
        UPDATE USERS
        SET member_name = #{member_name}, member_nickname = #{member_nickname}, member_introduce=#{member_introduce}
        WHERE member_id = #{member_id}
    </update>

<!--    <update id="updateMemberInfoDetail">-->
<!--        UPDATE MemberDetail_tbl-->
<!--        SET ageGroup = #{ageGroup}, category_name = #{category_name}-->
<!--        WHERE member_id = #{member_id}-->
<!--    </update>-->

    <!-- 네비게이션 이미지 띄우기 -->
<!--    <select id="selectProfileImageByMemberId" resultType="string">-->
<!--        SELECT member_profile_image-->
<!--        FROM USERS-->
<!--        WHERE member_id = #{memberId}-->
<!--    </select>-->



</mapper>